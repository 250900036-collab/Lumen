<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LUMEN</title>

<style>
body{
  margin:0;
  height:100vh;
  font-family:Arial, sans-serif;
  background: radial-gradient(circle at center, #7b2cff, #1a0033);
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  overflow:hidden;
}

#pantallaInicio{
  display:flex;
  flex-direction:column;
  align-items:center;
}

h1{
  position:absolute;
  top:30px;
  letter-spacing:4px;
}

button{
  width:220px;
  height:220px;
  border-radius:50%;
  border:none;
  background:red;
  color:white;
  font-size:45px;
  font-weight:bold;
  cursor:pointer;
  box-shadow:0 0 60px red;
}

button:active{
  transform:scale(0.95);
}

p{
  margin-top:25px;
}

#cameraScreen{
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:black;
}

video{
  width:100%;
  height:100%;
  object-fit:cover;
}
</style>
</head>
<body>

<div id="pantallaInicio">
  <h1>LUMEN</h1>
  <button onclick="activarSOS()">SOS</button>
  <p>Presiona si necesitas ayuda</p>
</div>

<div id="cameraScreen">
  <video id="video" autoplay playsinline></video>
</div>

<script>
let sirena;

function activarSOS(){

  // ðŸ”Š Sirena fuerte generada por frecuencia
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const oscillator = ctx.createOscillator();
  const gainNode = ctx.createGain();

  oscillator.type = "sawtooth";
  oscillator.frequency.setValueAtTime(800, ctx.currentTime);
  oscillator.frequency.exponentialRampToValueAtTime(1200, ctx.currentTime + 1);
  gainNode.gain.setValueAtTime(1, ctx.currentTime);

  oscillator.connect(gainNode);
  gainNode.connect(ctx.destination);

  oscillator.start();
  setTimeout(() => oscillator.stop(), 5000);

  // ðŸ“³ VibraciÃ³n
  if(navigator.vibrate){
    navigator.vibrate([1000,500,1000]);
  }

  // ðŸ“ Obtener ubicaciÃ³n y abrir WhatsApp
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(function(position){

      let lat = position.coords.latitude;
      let lon = position.coords.longitude;

      let mensaje = 
        "ðŸš¨ NECESITO AYUDA ðŸš¨%0A" +
        "Mi ubicaciÃ³n:%0A" +
        "https://www.google.com/maps?q=" + lat + "," + lon;

      // ðŸ”¹ CAMBIA EL NUMERO POR EL QUE QUIERAS
      let numero = "5213319079914"; 
      
      window.open("https://wa.me/" + numero + "?text=" + mensaje, "_blank");

    });
  }

  // ðŸ“¹ Cambiar a pantalla cÃ¡mara
  document.getElementById("pantallaInicio").style.display="none";
  document.getElementById("cameraScreen").style.display="block";

  navigator.mediaDevices.getUserMedia({ video:true, audio:true })
  .then(stream=>{
    document.getElementById("video").srcObject=stream;
  });

}
</script>

</body>
</html>
